aggregates:
  Player:
    #module: "Player"
    metadata:
      Preprocessors: ["MOVE_CRUD_IT"]
      CRUD_IT_NO_UPDATE: true
      CRUD_IT_NO_DELETE: true
      NO_MOVE_EVENT_MODULE: true
      ShouldIssuePublisherObject: true
    friends:
      - SkillProcess.StartProduction
      - SkillProcess.CompleteProduction
    id:
      name: PlayerId
      type: address
      generator:
        class: signer
        tableName: PlayerTable
    properties:
      Level:
        type: u16
      Experience:
        type: u32
      Items:
        itemType: PlayerItem
      #Nickname:
      #  type: AsciiString
      #  length: 50
      #Intro:
      #  type: String
      #  length: 350

    entities:
      PlayerItem:
        id:
          name: ItemId
          type: u32
        properties:
          Quantity:
            type: u64

    methods:
      Create:
        event:
          isObjectShared: true # Share the object after created.

      Airdrop:
        requiredPermission: "__Publisher__"
        #requiredPermission: AdminCap
        parameters:
          ItemId:
            type: u32
          Quantity:
            type: u64
        event:
          name: PlayerAirdropped

      DeductItems:
        isInternal: true
        parameters:
          Items:
            itemType: ProductionMaterial
        event:
          name: PlayerItemsDeducted
