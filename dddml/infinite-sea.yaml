aggregates:
  FarmingProcess:
    module: "Farming"
    metadata:
      Preprocessors: ["MOVE_CRUD_IT"]
      CRUD_IT_NO_UPDATE: true
      CRUD_IT_NO_DELETE: true
      NO_MOVE_EVENT_MODULE: true
      ShouldIssuePublisherObject: true
    implements:
      - SkillProcess
    id:
      name: PlayerId
      type: address
      generator:
        class: signer
        tableName: FarmingProcessTable
    methods:
      Create:
        event:
          isObjectShared: true # Share the object after created.
      Start:
        parameters:
          Player:
            referenceType: Player
            isMutableReference: true
            isIgnoredInEvent: true
          FarmingItemProduction:
            referenceType: FarmingItemProduction
            eventPropertyName: ItemId
          Clock:
            referenceType: Clock
            isIgnoredInEvent: true
          #EnergyCoin: # todo Energy Coin
          #  referenceType: Coin<ENERGY_COIN>
          #  eventPropertyName: EnergyCost
        event:
          name: FarmingProcessStarted
          properties:
            EnergyCost:
              type: u64


  FarmingItemProduction:
    module: "Farming"
    metadata:
      Preprocessors: ["MOVE_CRUD_IT"]
      CRUD_IT_NO_UPDATE: true
      CRUD_IT_NO_DELETE: true
    id:
      name: ItemId
      type: u32
      generator:
        class: assigned
        tableName: FarmingItemProductionTable
    properties:
      ItemProduction:
        type: ItemProduction
    methods:
      #Create:
        #event:
        #  name: FarmingItemProductionCreated

  MiningProcess:
    module: "Mining"
    implements:
      - SkillProcess
    id:
      name: PlayerId
      type: address
      generator:
        class: signer
        tableName: MiningProcessTable

  MiningItemCreation:
    module: "Mining"
    id:
      name: ItemId
      type: u32
      generator:
        class: assigned
        tableName: MiningItemCreationTable
    properties:
      ItemCreation:
        type: ItemCreation

  SmithingProcess:
    module: "Smithing"
    implements:
      - SkillProcess
    id:
      name: PlayerId
      type: address
      generator:
        class: signer
        tableName: SmithingProcessTable

  SmithingItemProduction:
    module: "Smithing"
    id:
      name: ItemId
      type: u32
      generator:
        class: assigned
        tableName: SmithingItemProductionTable
    properties:
      ItemProduction:
        type: ItemProduction

superObjects:
  SkillProcess:
    properties:
      ItemId:
        type: u32
        defaultLogic:
          Move: "infinite_sea_common::item_id::unused_item()"
      StartTime:
        type: u64
        defaultLogic:
          Move: "0"
      EndTime:
        type: u64
        defaultLogic:
          Move: "0"


configuration:
  sequenceNumber: 1000
  metadata:
    NO_MOVE_EVENT_MODULE: true

  defaultModule:
    name: "Sui.InfiniteSea"
    requiredModules: [ "Common", "Player" ]
  submodules:
    Farming:
      requiredModules: [ "Common", "Player"  ]
    Mining:
      requiredModules: [ "Common", "Player" ]
    Smithing:
      requiredModules: [ "Common", "Player" ]
    Player:
      requiredModules: [ "Common" ]
    Common:
      requiredModules: [ ]
